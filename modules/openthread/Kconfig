# Copyright (c) 2022 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0

config OPENTHREAD_PLATFORM_PKT_TXTIME
	default y if NET_PKT_TXTIME
	default y if !NET_L2_OPENTHREAD

config OPENTHREAD_PLATFORM_CARRIER_FUNCTIONS
	default y if OPENTHREAD_DIAG && IEEE802154_CARRIER_FUNCTIONS
	default y if OPENTHREAD_DIAG && NRF5_CARRIER_FUNCTIONS

# In nrf-sdk, the init priority should be set to 90 to ensure that the OpenThread stack is
# initialized after MPSL.
config OPENTHREAD_SYS_INIT_PRIORITY
	default 90

config OPENTHREAD
	select NRF_802154_RADIO_DRIVER if HAS_HW_NRF_RADIO_IEEE802154 && !NET_L2_OPENTHREAD
	select NRF_802154_SER_HOST if !HAS_HW_NRF_RADIO_IEEE802154 && !NET_L2_OPENTHREAD
	select NRF_802154_RADIO_CONFIG if HAS_HW_NRF_RADIO_IEEE802154 && !NET_L2_OPENTHREAD

# Load the main OpenThread stack Kconfig file
source "${ZEPHYR_BASE}/modules/openthread/Kconfig"

if OPENTHREAD

# Load the nrf-specific OpenThread stack Kconfig file
menu "OpenThread stack nrf features"
rsource "Kconfig.features.nrf"
endmenu

menu "NRF5 radio configuration"
rsource "Kconfig.nrf5"
endmenu

endif # OPENTHREAD
